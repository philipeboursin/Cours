\chapter{Géométrie projective}
    \section{Ensembles algébriques projectifs}
        Soit $k \in \mathbf{Fld}$, $V$ un $k$ espace vectoriel tel que $1 \leq \dim V < \infty$.
        \begin{defi}
            L'espace projectif de $V$ est donné par
            \begin{align}
                \mathbb{P}(V) := \{L \subseteq V \mid \dim L = 1\}
            \end{align}
        \end{defi}
        Il est possible de représenter $\mathbb{P}(k^{n+1}) := \mathbb{P}^n_k$ de manière un peu plus explicite : considérons la relation d'équivalence sur $k^{n+1} \bs \{0\}$ suivante : 
        \begin{align*}
            x \sim y \iff \exists \lambda \in k \bs \{0\} \mid x = \lambda y
        \end{align*}
        Alors $\mathbb{P}^n_k \simeq k^{n+1}/\sim$, via l'application
        \begin{align*}
            \begin{array}{cccc}
                & k^{n+1}/\sim & \to & \mathbb{P}^n_k \\
                & [x_0, \cdots, x_n] & \mapsto & \mathrm{vect}((x_0, \cdots, x_n))\\
            \end{array}
        \end{align*}
        $\mathbb{A}^N \subseteq \mathbb{P}^n$ via 
        \begin{align*}
            \begin{array}{cccc}
                & \mathbb{A}^N & \injectivearrow & \mathbb{P}^n \\
                & x & \mapsto & [1, x] \\
            \end{array}
        \end{align*}
        $V \subseteq \mathbb{A}^n$ variété affine, alors $\overline{V} \subseteq \mathbb{P}^n$ adhérence de $V$ dans $\mathbb{P}^n$ variété projective. Variété (quasiprojective): un ouvert d'une variété projective ou affine. $V$ variété, $k(V) = \{(U,f) \mid U \subrel{ouv} V,\, f : U \to k$ fonction régulière$\}/\sim$ où
        \begin{align*}
            (U,f) \sim (U', f') \iff f = f' \text{ sur } W \subseteq U \cap U'
        \end{align*}
        \begin{remq}
            Si $U \subseteq V$ ouvert, $k(V) \simeq k(U)$. En particulier, si $V \subseteq  \mathbb{A}^n$ variété affine, alors
            \begin{align*}
                k(\overline{V}) \simeq k(V) \simeq \Frac k[V]
            \end{align*}
        \end{remq}
        \begin{expl}
            $\mathbb{P}^1 = U_0 \cup U_1$, si $[1,t] = [s,1] \in U_0 \cap U_1$, alors $s = 1/t$. Alors $k(\mathbb{P}^1) \simeq k(t) \simeq k(s)$.
        \end{expl}
        \begin{defi} ($k = \bar k$)
            $V$ variété, $\dim V = \mathrm{trdeg}_kk(V)$
        \end{defi}
        \begin{expl}
            $k(\mathbb{P}^n) = k(\mathbb{A}^n)$, donc $\dim \mathbb{P}^n = \dim \mathbb{A}^n = n$.
        \end{expl}
        \begin{remq}
            $V$ variété, $U \subrel{ouv} V$, alors $\dim V = \dim U$.
        \end{remq}
        \begin{defi}
            $V$ variété, $x \in V$. Alors
            \begin{align*}
                \mathcal{O}_x = \{(U, f) \in k(V) \mid U \subrel{ouv} V,\, x \in U,\, f : U \to k \text{ régulière}\} \subseteq k(V)
            \end{align*}
            est l'anneau des fonction rationnelles régulières en $x$.
        \end{defi}
        \begin{defi}
            $V,W$ variétés. Une application rationnelle est la classe d'équivalence d'un morphhsime $\varphi : U_V \to W$ avec $U_V \subrel{ouv} V$ non vide, avec relation 
            \begin{align*}
                (\varphi : U_V \to W) \sim (\varphi' : U_V' \to W) \iff \varphi = \varphi' \text{ sur } \emptyset \neq D \subrel{ouv} U_V \cap U_V'
            \end{align*}
        \end{defi}
        \begin{expl}
            $V \to k = \mathbb{A}^1$ morphisme ssi fonction régulière. $V \to k$ application rationnelle ssi fonction rationnelle.
        \end{expl}
        \begin{defi}
            $V$ variété, $x \in V$. On note 
            \begin{align*}
                \mathfrak{m}_x = \{(U,f) \in \mathcal{O}_x \mid f(x) = 0\}
            \end{align*}
        \end{defi}
        \begin{exo}
            $\mathfrak{m}_x$ est un idéal maximal, seul idéal maximal de $\mathcal{O}_x$ qui est par conséquent un anneau local. Si $V$ est une variété affine, $\mathcal{O}_x \simeq k[V]_x$. Finalement, $\mathcal{O}_x$ dépends seulement sur un voisinage de $x$ (i.e. si $V,W$ variétés tq $x \in U_V \subrel{ouv} V$, $y \in U_W \subrel{ouv} W$ avec $U_V \simeq U_W$, alors $\mathcal{O}_{V,x} \simeq \mathcal{O}_{W,y}$).
        \end{exo}
        \begin{defi}
            $V$ variété, $x \in V$. L'espace tangent de $V$ en $x$ est défini comme le $k$-ev
            \begin{align*}
                T_xV = (\mathfrak{m}_x/\mathfrak{m}_x^2)^\vee
            \end{align*}
            $x$ est régulier si $\dim T_xV = \dim V$, singulier sinon.
        \end{defi}

    \section{Courbes projectives}
        \begin{defi}
            Une courbe projective est une variété projective de dimension $1$.
        \end{defi}
        \begin{expl}
            $C \subseteq \mathbb{A}^n$ courbe affine, alors $\overline{C} \subseteq \mathbb{P}^n$ est une courbe projective.
        \end{expl}
        \begin{prop}
            $C$ courbe projective, $x \in C$ point régulier. Si $\varphi : C \to \mathbb{P}^n$ application rationnelle, alors $\varphi$ est défini en $x$, i.e. il existe $\varphi' : U \to \mathbb{P}^n$ morphisme, $x \in U$ et avex $\varphi' \sim \varphi$.
        \end{prop}
        \begin{expl}
            Soit $E_\lambda = V(Y^2 - X(X - 1)(X - \lambda)) \subseteq \mathbb{A}^2_{(X,Y)} \subseteq \mathbb{P}^2_{(X,Y,Z)}$. Alors
            \begin{align*}
                \overline{E_\lambda} = V(Y^2Z - X(X - Z)(X - \lambda Z))
            \end{align*}
            est irréductible. $E_\lambda$ est régulière si $\lambda \neq 0,1$. Considérons l'application rationnelle
            \begin{align*}
                \begin{array}{cccc}
                    \pi : & \mathbb{P}^2 & \to & \mathbb{P}^1 \\
                    & [X,Y,Z] & \mapsto & [X,Y] \\
                \end{array}
            \end{align*}
            $\pi$ n'est pas défini en $[0,0,1]$. Soit $\varphi = \pi_{\overline{E_\lambda}} : \overline{E_\lambda} \to \mathbb{P}^1$, supposons que $\lambda \neq 0,1$ (donc $[0,0,1]$ est un point régulier de $\overline{E_\lambda}$). Soit $\varphi([x,y,z]) = [X,Y] = [YZ, (X - Z)(X - \lambda Z)]$ (car $X(X - Z)(X - \lambda Z) = Y^2Z$). A $z = 1$, $\varphi([x,y,1]) = [Y, (X - 1)(X - \lambda)]$.
            \begin{enumerate}
                \item Si $\lambda = 0$ : on voit $[x,y,1]$ comme un point de $\mathbb{A}^2$, alors $\varphi : \mathbb{A}^2 \to \mathbb{P}^1$. Mais il n'existe pas de $\psi : U \to \mathbb{P}^1$ morphisme, $(0,0) \in U \subrel{ouv} \mathbb{A}^2$. Supposons que $\psi$ existe, alors
                \begin{align*}
                    \psi = \left[ \frac{H_0}{G_0}, \frac{H_1}{G_1} \right]
                \end{align*}
                sur $0 \in U' \subrel{ouv} U$, avec $H_i, G_i \in k[X,Y,Z]$ homogènes tq $\deg H_i = \deg G_i$ et $G_i([0,0,1]) \neq 0$. Rq : On peut supposer $U \subseteq U_z = \{z = 1\} \simeq \mathbb{A}^2$. Ainsi il existe $U' \subseteq \mathbb{A}^2_{x,y}$, $0 \in U$, $\exists h_i,g_i \in k[X,Y]$, $g_i(0,0) \neq 0$. Dans $\mathbb{P}^1$,
                \begin{align*}
                    [X,Y] = \left[ \frac{h_0}{g_0}, \frac{h_1}{g_1} \right]
                \end{align*}
                sur $U'$. Ainsi $Xh_1/g_1 = Yh_0/g_0$ sur $0 \in U' \subrel{ouv} E_{\lambda}$, donc $xh_1g_0 = yh_1g_0$ et $x,y \in k[E_\lambda]$. Maintenant $U'$ est dense dans $E_\lambda$ donc $xh_1g_0 - yh_0g_1 \in (Y^2, X^2(X - 1))$
                \begin{itemize}
                    \item $g_0(0,0) \neq 0 \Rightarrow g_0 = g_0^0 + \cdots$ et $g_0^0 \neq 0$
                    \item $g_1(0,0) \neq 0 \Rightarrow g_0 = g_1^0 + \cdots$ et $g_0^0 \neq 0$
                \end{itemize}
                $\psi$ défini en $0$ ssi $h_0(0,0) \neq 0$ ou $h_1(0,0) \neq 0$. Supposons $h_0(0,0) \neq 0$, on a $h_0 = h_0^1 + \cdots$ avex $h_0^0 \neq 0$. La partie linéaire de $Xh_1g_0 - Yh_0g_1$ est $Xh_1^0g_0^0 -  Yh_0^0g_1^0$. Les éléments de $(Y^2 - X(X - 1))$ ont $0$ comme partie linéaire donc $Xh_1^0g_0^0 -  Yh_0^0g_1^0 = 0$ donc $h_1^0g0^0 = 0 = h_0^0 g_0^0$ absurde.
            \end{enumerate}
        \end{expl}
        \begin{coro}
            $C$ courbe projective lisse. Alors toute application rationnelle $\varphi : C \dashrightarrow \mathbb{P}^n$ est régulière.
        \end{coro}
        \begin{coro}
            $C,C'$ courbes lisses projectives, toute application birationnelle (application rationnelle $C \dashrightarrow C'$ telle que $\exists \emptyset \neq U \subrel{ouv} C$, $\exists \emptyset \neq U' \subrel{ouv} C'$, telle que $\varphi : U \to U'$ isom)
        \end{coro}
        \begin{proof}
            $x \in U \subrel{ouv} C$, $\varphi : U \bs \{x\} \to \mathbb{P}^n$ morphisme. On peut supposer que $x = [x_0, \cdots, c_n]$ avec $x_0 \neq 0$. Soit $C' = C \cap U_0 \subseteq U_0 \simeq \mathbb{A}^n$. On peut supposer que $U \subrel{ouv} C'$. Soit $\varphi = [f_0, \cdots, f_n]$, $f_i = H_i/G_i$ sur $U \bs \{x\}$, $H_i, G_i \in k[X_0, \cdots, X_n]$ homogènes, $\deg G_i = \deg H_i$, $G_i(x) \neq 0$. Soient $h_i = H_i(1,X_1, \cdots, X_n)$, $g_i = G_i(1,X_1, \cdots, X_n)$, $f_i = h_i/g_i$ sur $U \bs \{x\}$, $g_i,h_i \in k[C']$. $x$ point réfgulier $\iff \mathcal{O}_x \simeq k[C']_x$ est un DVR. Ainsi $\mathfrak{m}_x = (t)$, notons $v_x : k(C')  \bs \{0\} \to \mathbb{Z}$. Soit $r_i = v_x(f_i) \in \mathbb{Z}$. (ops $f_0, \cdots, f_n \neq 0$, sinon si $f_0 = 0$, on considère $C \dashrightarrow \mathbb{P}^{n-1}$). Soit $r = \min \{r_0, \cdots, r_n\}$, soit $\varphi' = [t^{-r}f_0, \cdots, t^{-r}f_n]$. Alors $\varphi = \varphi'$ sur $U \bs \{x\}$ et $\varphi'$ est défini en $x$, car si $r_i = r$, alors $v_x(t^{-r}f_i) = 0$, i.e. $t^{-r}f_i \in \mathcal{O}_x^\times$ n'est pas $0$ en $x$.
        \end{proof}
        $C$ courbe projective lisse, $x \in C$, $C \subseteq \mathbb{P}^n_{X_0, \cdots, X_n}$. $\exists U \subrel{ouv} C$ ,$x \in U$, $U$ est une courbe affine ($U = C \cap \{X_i \neq 0\}$). $\mathcal{O}_c = k[U]_x$ DVR, $m_x = (t)$, on dispose d'une valuation $v_x$. Alors
        \begin{align*}
            & \mathcal{O}_x = \{f \in k(C) \mid v_x(f) \geq 0\} \\
            & \mathfrak{m}_x = \{f \in k(C) \mid v_x(f) > 0\}
        \end{align*}
        \begin{defi}
            $f \in k(C)$ non nul.
            \begin{enumerate}
                \item Si $v_x(f) > 0$, on tit que $x$ est un zéro de $f$.
                \item Si $v_x(f) < 0$, on dit que $x$ est un pôle de $f$. 
            \end{enumerate}
        \end{defi}
        \begin{expl}
            $C = \mathbb{P}^1$, $f = \frac{X(2X - Y)}{(X - 3Y)^2} \in k(\mathbb{P}^1)$ Trouver les zéros et les pôles de $f$ : $U_0 = \{[1,t] \mid t \in k\}$, $U_1 = \{[s,1] \mid s \in k\}$, $k(\mathbb{P}^1) = k(U_0) = k(t)$. A travers cette égalitén on a
            \begin{align*}
                f = \frac{2 - t}{(1 - 3t)^2} \in k(t)
            \end{align*}
            Sur $U_0$ : $t = 2$ est un zéro, $t = 1/3$ est un pôle. Soit $t_0 \in \mathbb{A}^1 = U_0$, $k[\mathbb{A}^1]_{t_0} = k[t]_{(t - t_0)} = \{P/Q \mid P,Q \in k[t],\, Q(t_0) \neq 0\}$. Ainsi si $t \neq 2,1/3$, $f = P/Q \in \mathcal{O}^\times_{t_0}$ (car $P(t_0) \neq 0$, $Q(t_0) \neq 0$). Et si $t_0 = 2$, $\mathfrak{m}_{t_0} = (t - 2)$ et alors $v_{t_0}(f) = 1$ donc $2$ est zéro d'ordre $1$. Si $t_0 = 1/3$, alors $\mathfrak{m}_{1/3} = (t - 1/3) = (3t - 1)$, et alors $v_{1/3}(f) = -2$ donc $1/3$ est un pôle d'ordre $2$.
            On fait pareil avec l'autre recouvrement si $x$ est le point à l'infini, et on remarque que c'est un zéro d'ordre $1$. 
        \end{expl}
        \begin{theo}
            $V \subseteq \mathbb{P}^n$ variété projective. Si $f : V \to k$ est une fonction régulière, alors $f$ est une constante. 
        \end{theo}
        \begin{expl}
            $V = \mathbb{P}^1$, soit $f : \mathbb{P}^1 \to k$ une fonction régulière. Ainsi on obtiens deux rstrictions $f_{|U_0} \in k[\mathbb{A}^1]$, $f_{|U_1} \in k[\mathbb{A}^1]$ qui sont des fonctions régulières. Ainsi $\exists P \in k[t]$ tq $f([1,t]) = P(t)$ pour tout $t \in k$, et il existe $Q \in k[s]$ tel que $f([s,1])$ tq $f([s,1]) = Q(s)$ pour tout $s \in k$. Si $t \neq 0$, alors $P(t) = f([1,t]) = f([1/t, 1]) = Q(1/t)$. Mais alors soient $P = \sum^n a_it^i$, $Q = \sum^l b_it^i$, on obtiens donc l'égalité
            \begin{align*}
                \sum^n a_it^i = \sum^l b_i\frac1t^i
                \Rightarrow a_n t^{l + n} + \cdots + a_0t^l = b_l + \cdots + b_0t^l
            \end{align*}
            donc $n = l = 0$ et donc $P,Q \in k$ i.e. $f \in k$.
        \end{expl}
        \begin{coro}
            Soit $C$ une courbe projective lisse, alors $\forall f \in k(C)$, $f$ non constante a au moins un pôle et au moins un zéro.
        \end{coro}
        \begin{proof} (coro)
            On a, pour tout $f \in k(C)$ non nulle, $x \in X$, que 
            \begin{align*}
                v_x(f) = - v_x(1/f)
            \end{align*}
            Ainsi $x$ est un zéro de $f \iff x$ est un pôle de $1/f$. Ainsi il suffit de montrer que $\forall f \in k(C)$ non constante, $f$ a au moins un pôle. Supposons le contraire, soit $f \in k(C)$, $f$ non constante mais qui n'a pas de pôle. Alors $v_x(f) \geq 0$ pour tout $x \in X$. Alors $f : C \to k$ est une fonction régulière globale,  ce qui est contradictoire avec le théorème. 
        \end{proof}
        \begin{prop}
            $C$ courbe projective lisse, $f \in k(C)$, $f \neq 0$. Alors il y a un nombre fini de zéros et de pôles.
        \end{prop}
        \begin{proof}
            Soit $\emptyset \neq C' \subrel{ouv} C$ ouvert avec $C'$ courbe affine. On a montré que que si $V$ est une courbe affine, les sous-ensembles algébriques propres sont finis. C'est aussi vrai pour une courbe projective \cor{(Exercice)} : les sous-ensembles projectifs propres sont finis (on applique le résultat précédent plusieurs fois). Maintenant $C \bs C'$ est fini (c'est un  sous-ensemble algébrique  propre). Vérifions que $f$ a un nombre fini de pôles et de zéros sur cette courbe affine. Soit $f = g/h$, avec $g,h \in k[C']$ et $h \neq 0$. Alors $\{$zéros de $f\} \subseteq \{$zéros de $g\} = V(g) \cap C'$, et idem pour les pôles : $\{$pôles de $f\} \subseteq \{$zéros de $h\} = V(h) \cap C'$. Mais $V(g) \cap C'$ est un sous-ensemble algébrique propre de $C'$, car sinon on aurait $g = 0$ sur $C'$, i.e. $g \in k[C']$ donc $f = 0$. De manière similaire, $V(h) \cap C'$ est un sous-ensemble algébrique propre de $C'$.
        \end{proof}
        \begin{defi}
            $C$ courbe projective lisse, un diviseur sur $C$ est une somme finie formelle
            \begin{align*}
                D = \sum_{x \in C} n_xx
            \end{align*}
            avec $n_x = 0$ sauf pour un ensemble fini de points $x \in C$.
        \end{defi}
        \begin{nota}
            On note $\mathrm{Div}(C) = \{$diviseurs de $C\}$ (c'est le groupe abélien libre engendré par $C$ vue comme un ensemble)
        \end{nota}
        \begin{nota}
            On défini
            \begin{align*}
                \begin{array}{cccc}
                    \deg : & \mathrm{Div}(C) & \to & \mathbb{Z} \\
                    & \sum_{x \in C} n_xx & \mapsto & \sum_{x \in C} n_x \\
                \end{array}
            \end{align*}
            C'est un morphisme de groupes, et on notera $\mathrm{Div}^0(C) = \ker \deg$
        \end{nota}
        \begin{defi}
            Un diviseur principal est un diviseur associé à $f \in k(C)$, $f \neq 0$ est 
            \begin{align*}
                \mathrm{div} f = \sum_{x \in C} v_x(f)x
            \end{align*}
        \end{defi}
        \begin{nota}
            \begin{align*}
                div_0(f) &= \sum_{\substack{p \in C \\ p \text{ zéro de } f}} v_p(f)p \\
                div_\infty(f) &= \sum_{\substack{g \in C \\ g \text{ pôle de } f}} -v_p(f)g
            \end{align*}
        \end{nota}
        \begin{remq}
            \begin{align*}
                \mathrm{div} f = div_0(f) - div_\infty(f)             
            \end{align*}
        \end{remq}
        \begin{expl}
            $C = \mathbb{P}^1$, $f = \frac{X(2X - Y)}{(X - 3Y)^2}$.
            \begin{enumerate}
                \item zéros : $\infty = [0,1]$, $p = [1,2]$ (d'ordre $1$)
                \item pôles : $q = [3,1]$ d'ordre $2$.
            \end{enumerate}
            Ainsi $\mathrm{div} f = \infty + p - 2g$, diviseur principal de degré $0$.
        \end{expl}
        \begin{theo}
            $f \in k(C)$ non nulle, alors $\mathrm{div} f$ est de degré $0$.
        \end{theo}
        \begin{prop}
            \begin{enumerate}
                \item $\mathrm{div} (fg) = \mathrm{div} f + \mathrm{div} g$ pour tous $f,g \in k(C)$ non nuls.
                \item $\mathrm{div} 1/f = - \mathrm{div} f$ $\forall f \in k(C)$, $f \neq 0$.
            \end{enumerate}
        \end{prop}
        \begin{proof}
            \cor{Exercice}
        \end{proof}
        \begin{defi}
            $Pr(C) := \{\mathrm{div} f \mid f \in k(C)^\times\}$
        \end{defi}
        \begin{prop}
            \begin{enumerate}
                \item $Pr(C) \subseteq Div(C)$ est un sous-groupe.
                \item \begin{align*}
                    \begin{array}{cccc}
                        div : & k(C)^\times & \to & Pr(C) \\
                        & f & \mapsto & div f \\
                    \end{array}
                \end{align*}
                est un morphisme de groupes surjectif, de noyau $k^\times$.
            \end{enumerate}
        \end{prop}
        \begin{proof}
            soit $f \in k(C)^\times$ dans le noyau de $div$. Si $f$ n'est pas constante, alors $f$ a au moins un pôle et un zéro, et ainsi $div f \neq 0$.
        \end{proof}
        \begin{defi}
            On définit le groupe de Picard de $C$ comme
            \begin{align*}
                Pic(C) = Div(C)/Pr(C) = Div(C)/\sim
            \end{align*}
        \end{defi}
        \begin{nota}
            Soient $D,D' \in Div(C)$, alors
            \begin{align*}
                D \sim D' \iff D - D' = \div(f) \in Pr(C)
            \end{align*}
            où $f\in k(C)^\times$. Cette relation d'équivalence est nommée "linéairement équivalents". On note $[D]$ la cladde de $D$ dans $Pic(C)$.
        \end{nota}
        \begin{theo}
            \label{*}
            $Pr(C) \subseteq Div^0(C)$, i.e. pour tout $f \in k(C)^\times$, $div(f)$ est de degré $0$, i.e. $\deg (div_0(f)) = \deg (div_\infty(f))$.
        \end{theo}
        \begin{remq}
            $f \in k(C)$ non constante. Alors $\bar k = k \subseteq k(f)$ est purement transcendante, mais $\dim C = 1$, i.e. $tr \deg_kk(C) = 1$, donc $k(f) \subseteq k(C)$ est algébrique (et de type fini), i.e. $[k(C) : k(f)] < \infty$.
        \end{remq}
        \begin{theo}
            \label{**}
            $f \in k(C)^\times$ non constante. Alors
            \begin{align*}
                \deg(div_0(f)) = \deg(div_\infty(f)) = [k(C):k(f)]
            \end{align*}
        \end{theo}
        \begin{remq}
            $f \in k(C)^\times$ non constante, alors on peut définir
            \begin{align*}
                \begin{array}{cccc}
                    F : & C & \dashrightarrow & \mathbb{P}^1 \\
                    & x & \mapsto & [1, f(x)]\\
                \end{array}
            \end{align*}
            et on a prouvé que si $C$ est lisse, alors $F$ est en réalité un morphisme (est bien défini).
        \end{remq}
        \begin{theo}
            \label{***}
            \begin{align*}
                [k(C), k(f)] = \deg F
            \end{align*}
            où $\deg F$ est le nombre de points dans $F^{-1}(y)$ pour un $y \in \mathbb{P}^1$ point général.
        \end{theo}
        \begin{remq}
            Si $[k(C),k(f)] = 1$, alors $F$ est en réalité un isomorphisme.
        \end{remq}
        \begin{remq}
            $V,W$ variétés, et $V \dashrightarrow W$ birationelle ($\exists \emptyset \neq U_V \subseteq V,\, \emptyset \neq U_W \subseteq W$ ouverts, $U_V \simeq U_W$), alors $k(V) \simeq k(W)$. La réciproque est aussi vraie. Ainsi si $C$ est une courbe projective, $f \in k(C)^\times$ non constante, si $k(C) = k(f) \simeq k(\mathbb{P}^1)$, alors il existe une application birationnelle $C \dashrightarrow \mathbb{P}^1$.
        \end{remq}
        \begin{exo}
            $C,C'$ courbes lisses, alors il existe une application birationnelle $C \dashrightarrow C'$ si et seulement si $C \simeq C'$.
        \end{exo}
        Une conséquence du théorème \ref{*} est que le morphisme $\deg$ passe au quotient par $Pr(C)$, i.e. le morphisme
        \begin{align*}
            \begin{array}{cccc}
                \deg : & Pic(C) & \to & \mathbb{Z} \\
                & [D] & \mapsto & \deg D\\
            \end{array}
        \end{align*}
        est bien défini (et il est surjectif). Autrement dit, si $D \sim D'$, alors $\deg D = \deg D'$.
        \begin{exo}
            $C = \mathbb{P}^1$, alors pour tout $D \in Div^0(C)$, on a que $D$ est principal ($D = div f$ pour un $f \in k(\mathbb{P}^1)^\times$)
        \end{exo}
        \begin{defi}
            On définit la variété de Picard comme
            \begin{align*}
                Pic^0(C) = Div^0/Pr(C)
            \end{align*}
            C'est un sous groupe de $Pic(C)$.
        \end{defi}
        \begin{remq}
            Considérons le morphisme $\deg : Pic(C) \to \mathbb{Z}$. Alors $\ker(\deg) = Div^0(C)$. Ainsi si $C = \mathbb{P}^1$, $Pic^0(\mathbb{P}^1) = 0$ et ainsi $Pic(\mathbb{P}^1) \simeq \mathbb{Z}$.
        \end{remq}
        \begin{defi}
            Un diviseur $D = \sum n_pp$ sur $C$ est effectif si $n_p \geq 0$ pour tout $p \in C$.
        \end{defi}
        \begin{nota}
            On note $D \geq 0$ si $D$ est effectif, et $D' \geq D$ si $D - D' \geq 0$.
        \end{nota}
        \begin{nota}
            $D \in Div(C)$, considérons
            \begin{align*}
                \mathcal{L}(D) = \{0\} \cup \{f \in k(C)^\times \mid div(f) + D \geq 0\}
            \end{align*}
            Plus explicitement, $D = \sum n_pp$, alors $f \in k(C)^\times$ est dans $\mathcal{L}(D)$ si et sulement si $n_p + v_p(f) \geq 0$.
        \end{nota}
        \begin{lemm} ($D = 0$)
            \label{d=0}
            \begin{align*}
                \mathcal{L}(0) = k
            \end{align*}
        \end{lemm}
        \begin{proof}
            $\mathcal{L}(0) = \{0\} \cup \{f \in k(C)^\times \mid div(f) \geq 0\}$, or $div(f) = div_0(f) - div_\infty(f)$, et si $f \notin k$, alors $div_\infty(f) \neq 0$ donc $f \notin \mathcal{L}(0)$, et si $f \in k^\times$, alors on a bien $div(f) = 0$.
        \end{proof}
        \begin{expl}
            $C = \mathbb{P}^1$, $p = [0,1] \in \mathbb{P}^1$, $n > 0$ entier. Notons $D = np$, alors 
            \begin{align*}
                \mathcal{L}(D) = \{0\} \cup \{f \in k(C)^\times \mid div(f) + np \geq 0\}
            \end{align*}
            Ainsi $f \in \mathcal{L}(D) \iff \forall g \neq p,\, v_p(f) \geq 0$ et $v_p(f) + n \geq 0$. Essayons de caractériser cela : $p \in \mathbb{A}^1 \subseteq \mathbb{P}^1$ où on identifie $\mathbb{A}^1$ avec l'ouvert $\{[x,1] \mid x \in \mathbb{A}^1\}$, et $k(\mathbb{P}^1) \simeq \mathbb{A}^1 = k(t)$. Ainsi $\mathcal{O}_p = k[\mathbb{A}^1]_0$ correspond donc aux fractions rationnelles dont le dénominateur ne s'annule pas en $0$. Remarquons alors que si $f = P/Q$, $P,Q \in k[t]$. Alors écrivons $P = t^nP'$, $Q = t^m Q'$, avec $P'(0) \neq 0$, $Q'(0) \neq 0$. Alors $f = t^{n - m}(P'/Q')$, et $v_p(f) = n - m$. On voudrait alors montrer que 
            \begin{align*}
                \mathcal{L}(np) = \left\{ \frac{P(t)}{t^n} \mid P \in k[t],\, \deg P \leq n \right\}
            \end{align*}
            Il faut d'abord montrer que $1/t^i \in \mathcal{L}(np)$ si $0 \leq i \leq n$ pour prouver $\supseteq$. Mais si $p = 0$, alors $v_p(1/t^i) = -i$, et donc $v_p(1/t^i) + n \geq 0$. Et si $g \neq 0$, alors $v_g(1/t^i) = 0$ (\cor{Exercice}). Maintenant si $g = \infty = [1,0]$, on doit changer de carte pour calculer $\mathcal{O}_g$ : on prend $y \in \mathbb{A}^1 \mapsto [1,y] \in \mathbb{P}^1$. Et par ce changement de carte $k(t) \simeq k(s)$ via $t \mapsto 1/s$, et alors $1/t^i \mapsto s^i$ qui est de $g$-valuation positive, et ainsi $\infty$ n'est pas un pôle de $1/t^i$. \cor{Le sens réciproque est laissé en exercice}
        \end{expl}
        \begin{prop}
            \begin{enumerate}
                \item $\mathcal{L}(D) \neq 0$ si et seulement si $\exists E \geq 0$ diviseur effectif tel que $D \sim E$.
                \item $\mathcal{L}(D) \subseteq k(C)$ est un $k$-sev.
                \item Si $D \geq D'$, alors $\mathcal{L}(D) \subseteq \mathcal{L}(D')$ et $\dim_k \mathcal{L}(D')/\mathcal{L}(D) \leq \deg D' - \deg D$.
                \item Si $D' \sim D$, alors $\mathcal{L}(D) \simeq \mathcal{L}(D')$ dans $\mathbf{Vect}_k$.
                \item Si $D \geq 0$, alors $\dim_k \mathcal{L}(D) \leq \deg(D) + 1$ (et en particulier $\mathcal{L}(D)$ est un $k$-ev de dimension finie)
            \end{enumerate}
        \end{prop}
        \begin{proof}
            \begin{enumerate}
                \item $\mathcal{L}(D) \neq 0 \iff f \in k(C)^\times$ tel que $div(f) + D \geq 0$. Ainsi posons $E := div(f) + D \geq 0$, alors $E \sim D$ car $E - D = div(f)$. Pour le sens réciproque, si $E \geq 0$ et $E \sim D$, alors $\exists f \in k(C)^\times$ tel que $E - D = div(f)$, donc $0 \leq E = D + div(f)$ et ainsi $f \in \mathcal{L}(D) \bs \{0\}$.
                \item Si $f,g \in \mathcal{L}(D)$, alors $f + g \in \mathcal{L}(D)$ : notons $D = \sum_{p \in C} n_pp$, $p_i \in C$, $n_i \in \mathbb{Z}$. Alors $f \in \mathcal{L}(D) \iff v_p(f) + n_p \geq 0$ pour tout $p \in C$. Soit $f,g \in \mathcal{L}(D)$, il faut montrer que $v_p(f + g) + n_p \geq 0$ pour tout $p \in C$. Mais on sait que $v_p(f + g) \geq \min \{v_p(f), v_p(g)\} \geq -n_p$ comme $f,g \in \mathcal{L}(D)$, et ainsi $f + g \in \mathcal{L}(D)$. Il faut ensuite montrer que si $f \in \mathcal{L}(D)$, $\lambda \in k$, alors $\lambda f \in \mathcal{L}(D)$ : si $\lambda = 0$, ok. Sinon, $v_p(\lambda f) = v_p(f) \geq n_p$ si $f \in \mathcal{L}(D)$.
                \item Comme $D \geq D'$, alors $D' = D + E$ où $E \geq 0$. Maintenant si $f \in \mathcal{L}(D)$, alors $D' + div(f) = E + D + div(f)$ et $E, D + div(f) \geq 0$ donc $f \in \mathcal{L}(D')$. Pour le deuxième point, notons $D' = D + \sum_{i = 1} ^l n_iy_i$, $n_i \geq 0$. D'après le point précédent, on a $\mathcal{L}(D) \subseteq \mathcal{L}(D + y_1) \subseteq \mathcal{L}(D + 2y_1) \subseteq \cdots \subseteq \mathcal{L}(D)(D + n_1y_1) \subseteq \mathcal{L}(D)(D + n_1y_1 + y_2) + \cdots$. Comme $\deg D' - \deg D = \sum n_i$, il suffit de montrer que $\dim_k \mathcal{L}(D + y)/\mathcal{L}(D) \leq 1$ pour $y \in C$. Pour cela, considérons
                \begin{align*}
                    \begin{array}{cccc}
                        \varphi : & \mathcal{L}(D + y) & \to & k \\
                        & f & \mapsto & (t^{n_y + 1}f)(y)\\
                    \end{array}
                \end{align*}
                où $D = n_yy + \sum_{p \neq y} n_pp$, $m_y = (t) \subseteq \mathcal{O}_y$. $\varphi$ est bien défini : si $f \in \mathcal{L}(D + y)$ est non nul, $v_y(f) + n_y + 1 \geq 0$ et donc $v_y(t^{n_y + 1}) \geq 0$ et ainsi $t^{n_y + 1}f \in k(C)^\times$ est bien défini en $y$. Maintenant $f \in \ker \varphi \iff v_y(t^{n_y + 1}f) > 0 \iff n_y + v_y(f) \geq 0$. Il faut donc vérifier que si $f \in \ker \varphi$, alors $f \in \mathcal{L}(D)$. En $y$, $v_y(f) + n_y \geq 0$, et sinon si $x \neq y$, $f \in \mathcal{L}(D + y) \Rightarrow v_x(f) + n_x \geq 0$ et ainsi au final $div(f) + D \geq 0$.
                \item $D \sim D' \iff D' = D + div(f)$, où $f \in k(C)^\times$. Soit 
                \begin{align*}
                    \begin{array}{cccc}
                        \varphi : & \mathcal{L}(D) & \to & \mathcal{L}(D') \\
                        & g & \mapsto & \frac 1fg \\
                    \end{array}
                \end{align*}
                alors $\varphi$ est bien défini : soit $g \in \mathcal{L}(D)$, alors $D + div(g) \geq 0$. Mais 
                \begin{align*}
                    div(g/f) + D' = div(g) - div(f) + D' = div(g) + D \geq 0
                \end{align*}
                puis $\varphi$ est $k$-linéaire. Par le même argument, l'application 
                \begin{align*}
                    \begin{array}{cccc}
                        \psi : & \mathcal{L}(D') & \to & \mathcal{L}(D) \\
                        & g & \mapsto & fg \\
                    \end{array}
                \end{align*}
                est bien définie et $k$-linéaire, et est l'inverse de $\varphi$.
                \item C'est un cas particulier du point (3) : on a que $\dim_k \mathcal{L}(D)/\mathcal{L}(0) \leq \deg D$, puis $\mathcal{L}(0) \simeq k$ donc $\dim \mathcal{L}(D) - 1 \leq \deg D$.
            \end{enumerate}
        \end{proof}
        Ainsi on peut énoncer un corollaire du théorème \ref{*} :
        \begin{coro}
            \begin{enumerate}
                \item Si $D \sim D'$, alors $\deg D = \deg D'$.
                \item Si $\mathcal{L}(D) \neq 0$, alors $\deg D \geq 0$ (donc si $\deg D < 0$, alors $\mathcal{L}(D) = 0$)
                \item Si $\deg D \geq -1$, alors $\dim \mathcal{L}(D) \leq \deg D + 1$.
            \end{enumerate}
        \end{coro}
        \begin{proof}
            \begin{enumerate}
                \item Ok
                \item $\mathcal{L}(D) \neq 0 \iff \exists E \geq 0$ tel que $E \sim D$. Mais alors $\deg E = \deg D \geq 0$ car $E \geq 0$.
                \item Si $\mathcal{L}(D) = 0$, alors $0 \leq \deg D + 1$ si $\deg D \geq -1$. Ainsi on peut supposer que $\mathcal{L}(D) \neq 0$. Alors $\exists E \geq 0$ tel que $E \sim D$, donc $\deg E = \deg D$, et $\dim \mathcal{L}(D) = \dim \mathcal{L}(E)$. On a donc que $\sim \mathcal{L}(E) \leq \deg E + 1$ par le point (5) du lemme précédent, et ainsi $\dim \mathcal{L}(D) \leq \deg D + 1$.
            \end{enumerate}
        \end{proof}
        \begin{nota}
            $\dim D := \dim_k \mathcal{L}(D)$
        \end{nota}
        \begin{theo} (Riemann-Roch)
            \label{RR}
            $C$ courbe projective lisse, $k = \bar k$. Alors il existe un entier $g \geq 0$ (le genre de $C$) tel que 
            \begin{enumerate}
                \item Pour tout diviseur $D$ ur $C$, on a $\dim(D) \geq \deg(D) + 1 - g$
                \item Si $\deg D \geq 2g - 1$, alors $\dim(D) = \deg(D) + 1 - g$
            \end{enumerate}
        \end{theo}
        \begin{theo} (dualité de Serre)
            $\exists$ diviseur $K_c$ (diviseur canonique) tel que $\deg(K_c) = 2g - 2$, et $\dim(D) - \dim(K_c - D) = \deg D + 1 - g$.
        \end{theo}
        \begin{theo}
            $C$ courbe projective lisse sur $k = \bar k$. On a $g = 0 \iff C \simeq \mathbb{P}^1$
        \end{theo}
        \begin{proof}
            \item $\Leftarrow$ : Montrer que $\dim(D) \geq \deg(D) + 1$ pour tout diviseur $D$, et $\sim(D) = \deg D + 1$ si $\deg D \geq -1$. On sait déja que si $\deg D \geq -1$, alors $\dim(D) \leq \deg(D) + 1$ (vrai pour tout $C$!). Il suffit donc de montrer $\dim D = \deg D + 1$ si $\deg D \geq -1$. Si $\deg D = -1$, alors $\mathcal{L}(D) = 0$ et donc $0 = -1 + 1$ ok. Ainsi on peut supposer que $\deg(D) = n \geq 0$. On a vu (exercice) que sur $\mathbb{P}^1$, si $\deg D = \deg D'$, alors $D \sim D'$. Ainsi si $\deg D = n$, alors $D \sim np$ avec $p \in \mathbb{P}^1$. Et ainsi $\dim(D) = \dim(np)$ mais on a aussi vu en exercice que $\mathcal{L}(np) = k + k1/t + \cdots + k1/t^n$ dont une base est les $1/t^i$, donc de dimension $n + 1$. On a donc $\dim D = \dim np = n + 1 = \deg D + 1$.
            \item $\Rightarrow$ : Supposons que le genre $g$ de $C$ est $0$. Donc pour tout diviseur $D$ sur $C$ on a que $\dim D \geq \deg D + 1$ et $\dim D = \deg D + 1$ si $\deg D \geq -1$. Soit $D = p$, $p \in C$. Alors $\deg D = 1$, et $\dim(D) = \deg(D) + 1 = 2$. Et donc $\mathcal{L}(0) \nsubseteq \mathcal{L}(D)$ et donc il exists $f \in \mathcal{L}(D)$ non constante, et donc $\div_{\infty}(f) \neq 0$, mais comme $f \in \mathcal{L}(D)$, $div(f) + p \geq 0$, $\div_\infty = p$. Mais d'après le théorème \ref{**}, $\deg(div_\infty(f)) = \deg(div_0(f)) = [k(C): k(f)] = 1$ et donc $k(C) = k(f)$, mais $k(f) \simeq k(\mathbb{P}^1)$ et ainsi $C \simeq \mathbb{P}^1$ (du fait que si $C,C'$ sont des courbes lisses, alors $k(C) \simeq k(C') \iff C \simeq C'$)
        \end{proof}
        \begin{defi}
            $C$ courbe elliptique est une courbe projective lisse de genre $g = 1$.
        \end{defi}
        \begin{theo}
            $C$ courbe elliptique, $o \in C$ point. Soit 
            \begin{align*}
                \begin{array}{cccc}
                    \varphi : & C & \to & Pic^0(C) \\
                    & p & \mapsto & [p - o]\\
                \end{array}
            \end{align*}
            Alors $\varphi$ est bijectif.
        \end{theo}
        \begin{proof}
            \item Injective : supposons que $\varphi(p) = \varphi(g)$, $p,g \in C$ et $p \neq g$. Alors $[p - o] = [g - o]$, et ainsi $p - o \im g - o$ et donc $p \sim g$, i.e. $p - g = div(f)$, opur un $f \in k(C)^\times$. Maintenant $div_0(f) = p$, $div_\infty(f) = g$ est de degré $1$ donc $k(f) = k(C)$ (d'après \ref{**}). Ainsi $k(\mathbb{P}^1) \simeq k(C)$ et donc $\mathbb{P}^1 \simeq C$, absurde puisque $\mathbb{P}^1$ est de genre $0$.
            \item Surjective : Soit $D \in Div^0(C)$, soit $D' = D + o$. Alors $D'$ est un diviseur de degré $1$ : d'après le \hyperref[RR]{le théorème de Riemann-Roch}, $\dim (D') = \deg(D') + 1 - 1  = 1$. Alors $\mathcal{L}(D') \neq 0$, et ainsi il exists $E \geq 0$ tel que $D' \sim E$. Mais $\deg E = \deg D' = 1$ donc $E = p$, $p \in C$. Et alors $D' \sim E = p$ d'où $D + o \sim p$ et donc $[D] = [p - o]$.
        \end{proof}